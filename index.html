<!DOCTYPE HTML>
<html>
	<head>
		<style>
			/* Style the video: 100% width and height to cover the entire window */
			#background-video {
				position: fixed;
				right: 0;
				bottom: 0;
				min-width: 100%;
				min-height: 100%;
			}

			#splashscreen {
			    position:absolute;
			    top:0;
			    left:0;
			    bottom:0;
			    width:100%;
			    background-color:white;
					position: absolute;
			    text-align: center;
			    top: 30%;
			    width: 100%;
					font-family: "Courier New";
			}

			#mainpage {
				display: none;
			}

			#welcome_text {
		    /* left: 0;
		    line-height: 200px;
		    margin-top: -140px; */
				font-size: 6em;
			}

			button {
				background-color: white;
  			color: black;
  			border: 2px solid #555555;
			  padding: 15px 32px;
			  text-align: center;
			  text-decoration: none;
			  display: inline-block;
			  font-size: 2em;
				width: 40%;
				top: 50%;
				justify-content: center;
			}

			button:hover {
			  background-color: #555555;
			  color: white;
			}

		</style>
	</head>
	<body>

		<div id="splashscreen">
    <h1 id="welcome_text">WELCOME TO THE VOID</h1>
		<div class="enter_buttons">
				<button type="button" onclick="play()" class="enter_link">Go gentle into that good night</button>
				<button type="button" onclick="play()" class="enter_link">Do not go gentle into that good night</button>
		</div>
		</div>

		 <!-- onclick="play()" -->
		<!-- Background video -->
		<!-- Using video with audio included to hopefully avoid loading problem -->
		<div id="mainpage">
				<video autoplay loop id="background-video">
				  <source src="blinking_void.mp4" type="video/mp4">
				</video>

				<audio id="audio" loop>
				  <source src="intro.mp3" type="audio/ogg">
				  <embed src="intro.mp3" autostart="true" loop="true" hidden="true">
				</audio>

				<div
					id="sketch"
					style="overflow-x:auto; width: 100%; position: fixed;"
				></div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.10/p5.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.10/addons/p5.dom.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.10/addons/p5.sound.js"></script> -->

		<script>
			let change = 0
			let value = 0
			// let sound;
			// var audio = new Audio("intro.mp3")

			function preload() {
				myFont = loadFont('../fonts/blue-highway-d.ttf');
				// soundFormats('mp3')
				// mySound = loadSound('exit2.mp3')
				// sound = loadSound('intro.mp3');
			}

			function setup() {
				var canvas = createCanvas(window.innerWidth, window.innerHeight)
				// sound.loop()
				textAlign(LEFT, TOP)
				canvas.parent('sketch')

				textFont(myFont);

				// mySound.setVolume(1.0)
				// mySound.play()

				// change: moved video stuff to html
				// VIDEO BACKGROUND
				// added diff formats for diff browser rendering
				// vid = createVideo(['blinking_void.mp4', 'blinking_void.webm', 'blinking_void.ogv'], vidLoad)
				// vid.size(windowWidth, windowHeight)
			}

			// function vidLoad() {
				// vid.loop()
				// vid.volume(0)
			// }

			function windowResized() {
				resizeCanvas(windowWidth, windowHeight)
				// vid.size(windowWidth, windowHeight)
			}

			function draw() {
				fill(0)
				stroke(255)

				// circle(windowWidth / 2, windowHeight / 2, 500)

				textSize(windowWidth / 8)
				text(
					'DOWN THE VOID',
					windowWidth / 2 - textWidth('DOWN THE VOID') / 2,
					windowHeight / 5
				)
				textSize(windowWidth / 11)
				text(
					'WE GO',
					windowWidth / 2 - textWidth('WE GO') / 2,
					windowHeight / 5 + textSize() * 2
				)
				textSize(windowHeight / 20)
				text(
					'December 14 @ 10 PM',
					windowWidth / 10,
					windowHeight - windowHeight / 6
				)
				textSize(windowHeight / 25)
				text('treehouse', windowWidth / 10, windowHeight - windowHeight / 9)
			}

			function mouseWheel(event) {
				//move the square according to the vertical scroll amount
				value += event.delta
				//uncomment to block page scrolling
				return false
			}

			function touchMoved() {
				value += 20
				if (value > windowHeight * 1.4) {
					value = 0
				}
			}

			$('.enter_link').click(function(e){
		    $('#splashscreen').fadeOut('200', function(){
		        $('#mainpage').fadeIn('600');
		    });
			});

			function play(){
				 var audio = document.getElementById("audio");
				 audio.play();
			}

			// super hack-y attempt to get some on-click audio loops
			// function play(){
			// 	var i = 0;
			// 	while (i < 10) {
			// 		audio.play();
			// 		i++;
				// }
      // }
		</script>
	</body>
</html>
